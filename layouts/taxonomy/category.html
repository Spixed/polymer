{{ define "main" }}

<main class="archive-main archive-main--wide">
    <h1 class="archive-title">
        {{ T "category" | default "CATEGORY" }} // {{ .Title | upper }}
    </h1>

    <div class="grid-container">
        {{ range $index, $post := .Pages }}
            {{ $style_classes := slice "style-blue" "style-yellow" "style-green" "style-grey" "style-black" "style-red" }}
            {{ $style := index $style_classes (mod $index (len $style_classes)) }}

            <div class="card-wrapper span-4 {{ $style }}">
                <a href="{{ $post.Permalink }}" class="card-inner">
                    <div class="ink-blob"></div>
                    <div class="card-content">
                        <div>
                            <span class="meta">{{ if $post.Params.featured }}FEATURED{{ else if $post.Params.categories }}{{ index $post.Params.categories 0 | upper }}{{ else }}POST{{ end }}</span>
                            <span class="meta" style="background: transparent; color: inherit; box-shadow: inset 0 0 0 2px currentColor;">
                                {{ if $post.Params.author }}
                                    {{ with index $.Site.Data.authors $post.Params.author }}{{ .nickname | default $post.Params.author }}{{ else }}{{ $post.Params.author }}{{ end }}
                                {{ else }}
                                    {{ $.Site.Title }}
                                {{ end }}
                            </span>
                        </div>
                        <h2 style="word-break: break-word;">{{ $post.Title }}</h2>
                        <div style="margin-top: auto;">
                            <p style="font-size: 0.9rem; margin-bottom: 0.5rem; opacity: 0.8; display: -webkit-box; -webkit-line-clamp: 3; line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;">
                                {{ $post.Summary | plainify | truncate 130 }}
                            </p>
                            <p style="font-size: 0.8rem; font-weight: bold;">{{ $post.Date.Format "Jan 2, 2006" }}</p>
                        </div>
                    </div>
                </a>
            </div>
        {{ else }}
            <p style="font-family: 'Space Mono'; opacity: 0.6; grid-column: span 3;">{{ T "no_posts" | default "No posts found." }}</p>
        {{ end }}
    </div>
</main>
{{ end }}
